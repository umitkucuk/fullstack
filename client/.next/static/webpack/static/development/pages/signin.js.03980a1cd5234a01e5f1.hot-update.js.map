{"version":3,"file":"static/webpack/static\\development\\pages\\signin.js.03980a1cd5234a01e5f1.hot-update.js","sources":["webpack:///./components/SigninBox.js"],"sourcesContent":["import { Mutation, withApollo } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport cookie from 'cookie'\nimport redirect from '../lib/redirect'\n\nconst LOGIN = gql`\n  mutation Login($email: String!, $password: String!) {\n    login(email: { email: $email, password: $password }) {\n      email\n    }\n  }\n`\n\nconst SigninBox = ({ client }) => {\n  let email, password\n\n  return (\n    <Mutation\n      mutation={LOGIN}\n      onCompleted={data => {\n        console.log(data)\n        client.cache.reset().then(() => {\n          redirect({}, '/')\n        })\n      }}\n      onError={error => {\n        // console.log(error)\n      }}\n    >\n      {(login, { data, error }) => (\n        <form\n          onSubmit={e => {\n            e.preventDefault()\n            e.stopPropagation()\n\n            login({\n              variables: {\n                email: email.value,\n                password: password.value\n              }\n            })\n\n            email.value = password.value = ''\n          }}\n        >\n          {error && <p>No user found with that information.</p>}\n          <input\n            name=\"email\"\n            placeholder=\"Email\"\n            ref={node => {\n              email = node\n            }}\n          />\n          <br />\n          <input\n            name=\"password\"\n            placeholder=\"Password\"\n            ref={node => {\n              password = node\n            }}\n            type=\"password\"\n          />\n          <br />\n          <button>Sign in</button>\n        </form>\n      )}\n    </Mutation>\n  )\n}\n\nexport default withApollo(SigninBox)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAOA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;AADA;AAOA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAlCA;AAuCA;AACA;AACA;;;;A","sourceRoot":""}